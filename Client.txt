# Инструкция по созданиию ключа для клиентов OPENVPN
# На easy-rsa сервере
cd ~/easy-rsa/
mkdir -p ~/clients/keys
chmod -R 700 ~/clients/

# Создаем ключ для клиента Client-1
./easyrsa gen-req client-1 nopass
# Копируем в нашу директорию keys
cp pki/private/client-1.key ../clients/keys/
# Подписываем наш ключ
./easyrsa sign-req client client-1

# Далее нам нужно скачать файл ta.key с Open-Vpn-Server на easy-rsa сервер
gcloud compute ssh vpn-server-01 --zone=asia-east1-b --command="sudo cat /etc/openvpn/server/ta.key" > /home/$USER/Desktop/skillbox/ta.key
cat /home/$USER/Desktop/skillbox/ta.key | gcloud compute ssh easy-rsa --zone=asia-east1-b --command="sudo tee /home/$USER/clients/keys/ta.key > /dev/null"
 cd ~/easy-rsa/
sudo cp pki/issued/client-1.crt ~/clients/keys/
sudo chown $USER:$USER ~/clients/keys/*
